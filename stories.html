<!DOCTYPE html>
<html lang='en' xml:lang='en'>
<head>
	<meta charset = 'utf-8'>
	<title>Wikchamni Stories</title>
    <meta name='robots' content='index, follow'>
    <meta name='description' content="Read and listen to traditional Wikchamni stories with line-by-line translations.">
	<meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='assets/css/common.css'>
    <style>
		:root {
            /* --fluid-font-size: max(2.5vh, calc(1rem + 1.0vw)); */
		}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Helvetica, Arial, sans-serif;
        }
        body {
            color: var(--text-dark);
            background-color: var(--primary-black);
            /* background-color: var(--bg-light); */
            font-size: var(--fluid-font-size);
            font-size: calc(0.6 * var(--fluid-font-size));
        }
        select {
            padding: 0.2em 0.5em;
        }


        /**** SITE LAYOUT ****/

        #story-selection {
            background-color: var(--primary-medium);
            border-right: thin solid var(--primary-medium);
            width: 16em;
            height: 100%;
            flex-shrink: 0;
        }
        #story-selection > h2 {
            color: black;
            background-color: var(--primary-grey-dark);
            padding: 0.5em 1em;
            /* border-bottom: 1px solid var(--text-dark); */
        }
        #story-selection > h2, #more-coming-soon {
            flex-shrink: 0;
        }
        #story-list {
            overflow-y: scroll;
            padding: 0.5em;
            flex-grow: 1;
        }
        #story-list > button {
            border-radius: 0.25em;
            font-size: 1em;
            padding: 0.25em 0.5em;
            gap: 1em;
        }
        #story-list > button:hover {
            /* color: black; */
            background-color: var(--primary-grey-light);
        }
        #story-list > button + button {
            /* border-top: 1px solid var(--primary-grey-dark); */
        }
        #story-list > button > div {
            text-align: left;
        }
        .active-story {
            /* color: black; */
            background-color: var(--primary-white);
        }
        .story-number {
            color: var(--text-dark);
            font-size: 0.8em;
        }
        .story-list-subtitle {
            color: var(--text-dark);
            font-size: 0.8em;
        }
        #more-coming-soon {
            /* background-color: var(--primary-grey-dark); */
            /* border-top: 1px solid var(--text-dark); */
            padding: 0.5em;
        }
        #more-coming-soon > p {
            color: black;
            background-color: var(--primary-white);
            border: 2px solid var(--text-dark);
            border-radius: 0.5em;
            padding: 0.5em;
            text-align: center;
        }



        #story-reader {
            overflow-y: scroll;
            position: relative;
            /* padding: 1em; */
            min-height: 100%;
            text-align: center;
            flex-grow: 1;
            align-items: center;
            gap: 0.8em;
        }
        #story-header {
            background-color: var(--primary-white);
            /* background-color: var(--primary-grey); */
            border: thin solid var(--primary-grey-medium);
            /* border-radius: 1em; */
            filter: drop-shadow(var(--popout-shadow));
            position: sticky;
            top: 0;
            margin: 0.5em auto;
            padding: 0.3em;
            width: 28em;
            font-size: 1.2em;
            align-items: center;
            /* gap: 0.2em; */

            /**** uncomment for wide mode ****/
            /* border: none;
            border-bottom: thin solid var(--primary-medium);
            border-radius: 0;
            margin: 0;
            width: 100%; */
        }

        #player-title {
            /* font-size: 1.2em; */
            font-size: 0.75em;
            text-decoration: underline;
        }
        #player-title-translation {
            color: var(--text-subtitle);
            font-size: 0.75em;
        }
        #player-progress-wrapper {
            /* margin-top: 1em; */
            width: 12em;
            gap: 0.1em;
        }
        #player-progress-bar {
            background-color: var(--primary-grey-dark);
            border-radius: 1em;
            width: 100%;
            height: 4px;
        }
        #player-currenttime, #player-length {
            color: var(--text-subtitle);
            font-size: 0.6em;
        }
        #player-buttons {
            margin: 0.3em 0;
            justify-content: center;
            gap: 1em;
        }
        .player-button {
            --w: 2em;
            color: var(--primary-dark);
            /* background-color: var(--primary-dark); */
            /* border-radius: 0.2em; */
            width: var(--w);
            height: var(--w);
        }
        .stub-button {
            --w: 2em;
            background-color: var(--primary-dark);
            border-radius: 0.2em;
            width: var(--w);
            height: var(--w);
        }

        #story-contents {
            padding: 1em;
            align-items: center;
            gap: 0.8em;
        }
        .story-section {
            font-size: 1.2em;
        }
        .story-section-translation {
            /* font-size: 0.8em; */
            font-style: italic;
        }
        .story-current-selection {
            background-color: var(--primary-grey-light);
        }



        /**** MEDIA QUERIES ****/

        /* mobile-first styling for better load times on less-powerful devices */
        @media (max-aspect-ratio: 5/4) { /* mobile mode */
            /*  */
        }
		@media (min-aspect-ratio: 5/4) { /* desktop mode */
            :root {
                /*  */
            }
        }
		
	</style>
</head>
<body>

<div id='main' class='flex-col'>
    <div id='progress'></div>
    <div id='nav-bar' class='flex-separated-row'>
        <h1>Wikchamni Stories</h1>
        <nav role='navigation'>
            <ul class='flex-row'>
                <li><a>Home</a></li>
                <li><a>Dictionary</a></li>
                <li class='nav-selected'><a>Stories</a></li>
            </ul>
        </nav>
    </div>
    <div id='content' class='flex-row'>
        <div id='story-selection' class='flex-col'>
            <!-- <h2>STORIES</h2> -->
            <div id='story-list' class='flex-col'>
                <!-- <button class='flex-row'>
                    <p class='story-number'>1</p>
                    <div class='flex-col'>
                        <p class='story-list-title'>Ṭʰoxit yow ʔuwikʼ</p>
                        <p class='story-list-subtitle'>Eagle and Condor</p>
                    </div>
                </button> -->
            </div>
            <div id='more-coming-soon'>
                <p>Several stories have been recorded but not transcribed. More coming soon...</p>
            </div>
        </div>
        <div id='story-reader' class='flex-col'>
            <div id='story-header' class='flex-col'>
                <h2 id='player-title'>Kʰatatimčʰa yow Tokʼoʔwonʼo  ʔa·xit</h2>
                <p id='player-title-translation'>Kadadimcha and Her Pregnant Daughter</p>
                <div id='player-progress-wrapper' class='flex-col'>
                    <div id='player-buttons' class='flex-row'>
                        <!-- SVG icons from Tabler: https://tablericons.com/ -->
                        <button class='player-button' role='button' onclick='' aria-keyshortcuts="j" title="Jump to previous section (j)" aria-label="Jump to previous section keyboard shortcut j">
                            <svg id='prev-section' xmlns="http://www.w3.org/2000/svg" x-bind:width="size" x-bind:height="size" viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%">
                                <path d="M20.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z"></path>
                                <path d="M9.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z"></path>
                            </svg>
                        </button>
                        <button class='player-button' role='button' onclick='' aria-keyshortcuts="k" title="Play/Pause (k)" aria-label="Play or pause story keyboard shortcut k">
                            <svg id='play-pause' xmlns="http://www.w3.org/2000/svg" x-bind:width="size" x-bind:height="size" viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%">
                                <path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"></path>
                            </svg>
                        </button>
                        <button class='player-button' role='button' onclick='' aria-keyshortcuts="l" title="Jump to next section (l)" aria-label="Jump to next section keyboard shortcut l">
                            <svg id='next-section' xmlns="http://www.w3.org/2000/svg" x-bind:width="size" x-bind:height="size" viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%">
                                <path d="M2 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z"></path>
                                <path d="M13 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z"></path>
                            </svg>
                        </button>
                        <!-- <button class='stub-button'></button>
                        <button class='stub-button'></button>
                        <button class='stub-button'></button> -->
                    </div>
                    <div id='player-progress-bar'></div>
                    <div class='flex-separated-row'>
                        <p id='player-currenttime'>00:00</p>
                        <p id='player-length'>03:35</p>
                    </div>
                </div>
            </div>
            <div id='story-contents' class='flex-col'>
                <!-- <div>
                    <p class='story-section'>Hiya·mʼu wɨxnat ʔo·ma pʼaʔanʼin tɨʔɨsnaw, Kʰatatimčʰa xo·ʔoxʔoš ʔan tokʼoʔwonʼo ʔa·xit.</p>
                    <p class='story-section-translation'>Very long ago when the world was made, lived Kadadimcha and her pregnant daughter.</p>
                </div> -->
            </div>
        </div>
    </div>
</div>

<!-- load story data -->
<script type='text/javascript' src="stories/kadadimcha-annotated.js"></script>

<script type='text/javascript'>

    //// REFS ////

    // https://subscriptions.hollywoodreporter.com/site/thr-subscribe



    //// WAVE 3 ////

    // 8.5 hrs: site layout
    // 2.0 hrs: data format, story annotation



    //// DOM Anchors ////

    const storylistElem = document.getElementById('story-list');
    const titleElem = document.getElementById('player-title');
    const subtitleElem = document.getElementById('player-title-translation');
    const contentElem = document.getElementById('story-contents');

    let activeStory = 0;
    const stories = [
        story_kadadimcha,
        {
            titleShortL1 : `Kʰumwitaʔaʔ yow Mo·yʼukʼ`,
	        titleShortL2 : `Thunder and Whirlwind`
        },{
            titleShortL1 : `Mo·yʼukʼiw`,
	        titleShortL2 : `Whirlwind Place`
        },{
            titleShortL1 : `Pʰohyon`,
	        titleShortL2 : `Hawk`
        },{
            titleShortL1 : `Tʰakʰaʔkʰaʔ`,
	        titleShortL2 : `Redbud`
        },{
            titleShortL1 : `Ṭʰoxit yow ʔuwikʼ`,
	        titleShortL2 : `Eagle and Condor`
        },{
            titleShortL1 : `Ṭʰoxtin Pučʼoŋ`,
	        titleShortL2 : `Eagle's Son`
        }
    ];

    function loadStoryList () {
        let eStr = '';
        for (let i = 0; i < stories.length; i++) {
            const storyId = i + 1;
            const titleShortL1 = stories[i].titleShortL1;
            const titleShortL2 = stories[i].titleShortL2;
            eStr += `<button class='flex-row${(i==activeStory) ? ' active-story' : ''}'>`;
                eStr += `<p class='story-number'>${storyId}</p>`;
                eStr += `<div class='flex-col'>`;
                    eStr += `<p class='story-list-title'>${titleShortL2}</p>`;
                    eStr += `<p class='story-list-subtitle'>${titleShortL1}</p>`;
                eStr += `</div>`;
            eStr += `</button>`;
        }
        // <button class='flex-row'>
        //     <p class='story-number'>1</p>
        //     <div class='flex-col'>
        //         <p class='story-list-title'>Ṭʰoxit yow ʔuwikʼ</p>
        //         <p class='story-list-subtitle'>Eagle and Condor</p>
        //     </div>
        // </button>
        storylistElem.innerHTML = eStr;
    }

    function loadStory (story) {
        // title
        titleElem.innerHTML = story.titleL1 ?? 'Untitled';
        subtitleElem.innerHTML = story.titleL2 ?? 'Untitled';
        // story sections
        let eStr = '';
        for (let i = 0; i < story.timestampsBySentence.length; i += 3) {
            const timestamp = story.timestampsBySentence[i];
            const sectionL2 = story.timestampsBySentence[i+1];
            const sectionL1 = story.timestampsBySentence[i+2];
            eStr += `<div>`;
                eStr += `<p class='story-section${(i==0)?' story-current-selection':''}'>${sectionL2}</p>`;
                eStr += `<p class='story-section-translation'>${sectionL1}</p>`;
            eStr += `</div>`;
        }
        // <div>
        //     <p class='story-section'>Hiya·mʼu wɨxnat ʔo·ma pʼaʔanʼin tɨʔɨsnaw, Kʰatatimčʰa xo·ʔoxʔoš ʔan tokʼoʔwonʼo ʔa·xit.</p>
        //     <p class='story-section-translation'>Very long ago when the world was made, lived Kadadimcha and her pregnant daughter.</p>
        // </div>
        contentElem.innerHTML = eStr;
    }

    loadStoryList();
    loadStory(stories[activeStory]);



    

</script>

</body>
</html>