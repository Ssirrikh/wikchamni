<!DOCTYPE html>
<html lang='en' xml:lang='en'>
<head>
	<meta charset = 'utf-8'>
	<title>Lexical</title>
    <meta name='robots' content='index, follow'>
    <meta name='description' content="Work on your language's lexicon in a clean, modern interface with support for automated checks and formatting.">
	<meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='assets/css/common.css'>
    <style>
		:root {
            /*  */
		}

        body {
            color: var(--text-dark);
            background-color: var(--bg-dark);
            /* background-color: var(--bg-light); */
            font-size: var(--fluid-font-size);
        }
        select {
            padding: 0.2em 0.5em;
        }



        /**** SITE LAYOUT ****/

        #main-floating {
            background-color: var(--bg-light);
            border: 1px solid var(--border-highlight);
            border-radius: 0.3em;
            transform: translate(-50%,-50%);

            position: absolute;
            top: 50%;
            left: 50%;
            width: min(20em, 90vw);

            padding: 0.5em;
        }
        #lang-data {
            /*  */
        }
        #lang-stats {
            font-size: 0.5em;
        }
        #lang-data > label {
            margin-top: 0.5em;
            margin-bottom: 0.1em;
        }
        #lang-data > input {
            padding: 0.2em 0.5em;
        }
        .separator-line {
            /* for unknown reasons, this class was suddenly forced to have a height of 0px after adding common.css */
                /* removing common.css did not reset the behavior, and it now persists */
                /* removing the .flex-col class fixes this issue; no idea why */
                /* adding display:list-item fixes the issue, but no other value of display works; no idea why */
                /* we can't afford to spend more time diagnosing this, so we'll have to use borders instead */
            /* background-color: var(--text-subtitle);
            height: 1px; */

            border-bottom: 1px solid var(--text-subtitle);
            width: 100%;
            margin: 0.5em 0;
        }
        .input-subtitle {
            color: var(--text-subtitle);
            font-size: 0.4em;
        }
        .h-sep-dark {
            border-bottom: thin solid var(--primary-grey-dark);
            width: 100%;
        }
        .h-sep-light {
            border-bottom: thin solid var(--primary-grey);
            width: 100%;
        }

        /* word forms */
        #forms-wrapper {
            /* font-size: 0.5em; */
        }
        .forms-catg {
            font-size: 0.7em;
        }
        .forms-formcount {
            color: var(--text-subtitle);
        }
        .forms-formnames-wrapper {
            font-size: 0.5em;
            gap: 0.5em;
        }
        .forms-formname {
            background-color: var(--bg-white);
            border: 1px solid var(--text-subtitle);
            border-radius: 0.5em;

            padding: 0.2em 0.5em;
        }
        .forms-unattested {
            color: var(--text-subtitle);
            border: 1px solid var(--border-light);
        }
        .no-forms {
            color: var(--text-subtitle);
            font-size: 0.5em;
        }


        /* reuseable components */
        .subtitle {
            color: var(--text-subtitle);
        }
        .subtitle-small {
            color: var(--text-subtitle);
            font-size: 0.8em;
        }
        .subtitle-warning-small {
            color: var(--warning-highlight);
            font-size: 0.8em;
        }

        /* from chill: text is #fff, border is #ccc, inactive text is opacity .4 */

        .toggle-switch {
            /* color: white; */
            background: linear-gradient(180deg, #fff2 0%, #9992 100%);
            border: 1px solid var(--border-light);
            border-radius: 0.2em;
            /* padding: 0.2em; */
        }
        .toggle-switch > button {
            font-size: 1em;
        }



        /* word data entry */
        #main {
            /* border: 1px solid red; */
            width: 100vw;
            height: 100vh;
            align-items: stretch;
        }
        #panel-lexicon {
            /* border: 1px solid blue; */
            background-color: var(--bg-white);
            /* position: fixed; */
            /* top: 0; */
            width: 30%;
            width: 14em;
            /* height: max(100%, 100vh); */
            font-size: 0.8em;
            flex-shrink: 0;
        }
        #panel-entry-editor {
            /* border: 1px solid yellow; */
            background-color: var(--bg-light);
            background-color: var(--bg-offwhite);
            border-left: 1px solid var(--border-medium);
            /* padding: 0.5em; */
            overflow-y: scroll;
            font-size: 0.6em;
            /* gap: 0.5em; */
            flex-grow: 1;
        }

        /* lexicon header */
        #lexicon-header {
            color: var(--text-light);
            background-color: var(--bg-dark);
        }
        #lexicon-header > .flex-row {
            padding: 0.2em;
            align-items: center;
            justify-content: space-between;
        }
        #lexicon-header h2 {
            color: var(--border-highlight);
        }
        #lexicon-header .toggle-switch {
            /* border: 1px solid red; */
        }
        #lexicon-header .toggle-switch > button {
            color: var(--text-subtitle);
            border-radius: 1em;
            width: 3em;
        }
        #lexicon-header .toggle-switch > .toggle-selected {
            /* background: linear-gradient(180deg, #fff2 0%, #9992 100%); */
            /* border: 1px solid var(--text-light); */
            color: var(--text-light);
        }
        #lexicon-header > p {
            color: var(--bg-medium);
        }
        /* lexicon filters */
        #lexicon-filters {
            background-color: var(--bg-light);
            border-bottom: 1px solid var(--border-medium);
            font-size: 0.8em
        }
        #lexicon-search-wrapper {
            padding: 0.3em;
            gap: 0.3em;
            align-items: center;
        }
        #lexicon-search-wrapper > input {
            width: 100%;
            font-size: 1em;
        }
        #lexicon-search-from {
            border: 1px solid var(--border-medium);
            border-radius: 0.2em;
            position: relative;
            width: fit-content;
            padding: 0 0.2em;
            font-size: 0.8em;
            justify-content: center;
        }
        #lexicon-search-from > button {
            color: var(--text-subtitle);
            width: 4em;
            font-size: 1em;
        }
        #lexicon-search-from > .option-selected {
            color: var(--text-dark);
        }
        #lexicon-search-from-selector {
            background-color: var(--bg-dark);
            background-color: var(--bg-highlight);
            transform: translate(-50%,0.25em);
            position: absolute;
            width: 3.5em;
            height: 0.1em;
            bottom: 0;
            left: 50%;
            transition: 0.2s ease;
        }
        .selector-left {
            left: calc(50% - 4em) !important;
        }
        .selector-right {
            left: calc(50% + 4em) !important;
        }
        #catg-filter-wrapper {
            padding: 0.5em;
        }
        #lexicon-filter-catg-wrapper {
            padding: 0.3em;
            gap: 0.3em;
        }



        /* entry editor */
        /* #panel-entry-editor label, #panel-entry-editor h3 {
            font-size: 1.2em;
        } */
        /* #panel-entry-editor button {
            font-size: 1em;
        } */
        /* #panel-entry-editor input {
            padding: 0.2em 0.5em;
        }
        #panel-entry-editor select {
            font-size: 0.8em;
        }
        #entry-data-basic > label {
            margin-top: 0.5em;
            margin-bottom: 0.1em;
        }
        #entry-catg-wrapper {
            gap: 0.5em;
        }
        #entry-catg {
            width: min(90%, 10em);
        } */
        #entry-forms-wrapper {
            gap: 0.3em;
        }
        /* .entry-data-L2 {
            align-items: center;
            gap: 0.5em;
        } */
        #entry-add-wordform, #entry-add-sentence, #entry-add-note {
            color: var(--text-white);
            background-color: var(--bg-highlight);
            background-color: var(--primary);
            border-radius: 0.25em;

            padding: 0.3em 1em;
            width: fit-content;
            font-size: 1em;

            align-self: end;
        }
        #entry-add-wordform:hover, #entry-add-sentence:hover, #entry-add-note:hover {
            background-color: var(--primary-selection);
        }
        .entry-note > textarea {
            padding: 0.25em;
            resize: none;
        }
        #danger-zone-header {
            color: var(--warning-highlight);
            color: var(--warning-highlight-light);
            background-color: var(--warning-dark);
            border-radius: 0.5em 0.5em 0 0;

            font-size: 1em;
            padding: 0.5em 1em;
            justify-content: space-between;
        }
        #entry-danger-zone {
            color: var(--warning-dark);
            background-color: var(--warning-light);
            border-radius: 0 0 0.5em 0.5em;

            padding: 0.5em;
            gap: 0.5em;
        }
        #entry-delete-wrapper {
            align-items: center;
            gap: 0.5em;
        }
        #entry-delete-wrapper > p {
            color: var(--warning-dark);
        }
        #entry-delete {
            color: var(--warning-white);
            background-color: var(--warning-highlight-light);
            border-radius: 0.25em;

            padding: 0.5em 1em;
        }


        /**** ENTRY HEADER ****/

        #entry-header {
            background-color: white;
            color: white;
            background-color: var(--primary-selection);
            border-radius: 1em;
            filter: drop-shadow(0 0 4px #00000038);
            
            /* width: 100%; */
            /* max-width: 40em; */
            font-size: 1em;
            margin: 1em;
            padding: 1em;
            gap: 1em;

            /* uncomment to enable sticky mode */
            /* reqs explicit z-index to prevent sibling elements' shadows from rendering on top */
            /* border-bottom: thin solid var(--border-medium);
            border-radius: 0;
            z-index: var(--layer-front);
            position: sticky;
            top: 0;
            left: 0;
            margin: 0; */
        }

        #entry-L1 {
            color: black;
            background-color: var(--bg-light);
            border: none;
            border-bottom: thin solid var(--text-dark);
            border-radius: 4px;
            padding: 0.25em 0.5em;
            font-size: 1.5em;
        }
        #entry-L1-desc {
            color: var(--primary-grey);
            font-size: 0.5em;
        }
        #entry-catg {
            color: var(--primary-selection);
            background-color: white;
            border-radius: 1em;
            padding: 0.3em 0.5em;
            font-size: 1.25em;
        }
        #entry-image {
            color: white;
            background-color: var(--primary);
            border: thin solid white;
            border-radius: 0.5em;
            width: 5em;
            height: 5em;
        }

        







        .button-action {
            color: white;
            background-color: var(--primary-highlight);
            border-radius: 0.25em;
            padding: 0.3em 1em;
            width: fit-content;
            /* font-size: 1em; */
        }
        .button-action:hover {
            background-color: var(--primary-grey-dark);
        }




        .entry-form-wrapper {
            filter: drop-shadow(var(--popout-shadow));
        }
        .entry-form-wrapper button {
            font-size: 1em;
        }
        /* .entry-form-wrapper .button-action {
            font-size: 1em;
        } */
        .entry-form-header {
            background-color: white;
            color: white;
            background-color: var(--primary-grey);
            border-radius: 0.3em 0.3em 0 0;
            padding: 0.3em;
            gap: 0.3em;
        }
        .entry-form-header input {
            background-color: transparent;
            border: none;
            border-bottom: thin solid var(--primary-grey-dark);
            padding: 0.1em 0.5em;
            font-size: 1.2em;
        }
        .entry-form-header select {
            background-color: transparent;
            border: none;
            border-bottom: thin solid var(--primary-grey-dark);
            font-size: 1em;
        }
        .entry-form-content {
            background-color: var(--bg-light);
            border-radius: 0 0 0.3em 0.3em;
            padding: 0.3em;
            gap: 0.3em;
        }

        .entry-form-audio-gallery {
            flex-grow: 1;
        }
        .entry-form-add-audio {
            font-size: 0.8;
            flex-shrink: 0;
        }

        .entry-form-attachments > .flex-row {
            width: 100%;
        }

        .entry-example-labels {
            color: var(--text-subtitle);
            font-size: 0.8em;
        }
        
        .entry-example-audio-gallery {
            gap: 0.25em;
        }








        /* ////////////////////////////// */

        /* general */

        #entry-content {
            filter: drop-shadow(0 0 4px #00000038);
            padding: 1em 4em;
            gap: 0.5em;
        }

        .section-title {
            font-size: 1.5em;
        }

        .entry-audio-gallery {
            gap: 0.3em;
            justify-content: center;
            flex-grow: 1;
        }
        .entry2-audio-gallery {
            gap: 0.25em;
        }
        .icon-plus {
            color: var(--primary-black);
            color: white;
            background-color: var(--primary);
            border: thin solid var(--primary-black);
            border: none;
            border-radius: 0.3em;
            width: calc(1em + 0.3em + 0.3em);
            height: calc(1em + 0.3em + 0.3em);
        }
        .entry2-no-audio {
            color: var(--text-subtitle);
            font-size: 0.8em;
        }

        /* wordforms section */

        #entry-forms-legend {
            color: black;
            color: var(--primary-white);
            color: var(--bg-light);
            color: white;
            /* color: var(--text-subtitle); */
            background-color: var(--bg-offwhite);
            background-color: var(--primary-highlight-dark);
            background-color: var(--primary-selection);
            /* background-color: var(--bg-offwhite); */
            border-radius: 0.3em;
            padding: 0.3em;
            font-size: 1em;
        }

        .entry2-form-wrapper {
            background-color: white;
            /* filter: drop-shadow(0 0 4px #00000038); */
            border-radius: 0.3em;
            padding: 0.3em;
        }
        .entry2-form-wrapper > select {
            width: calc(1.25 * 10em);
            font-size: 0.8em;
        }
        #entry2-legend-case {
            width: 10em;
        }
        .entry2-form-wrapper > input {
            background-color: var(--bg-light);
            border: none;
            border-bottom: thin solid var(--border-medium);
            padding: 0.1em 0.5em;
            width: 16em;
            font-size: 1em;
        }
        #entry2-legend-form {
            width: 16em;
        }
        .entry2-form-wrapper > select + input, #entry2-legend-case + #entry2-legend-form {
            margin-left: 0.5em;
        }
        #entry2-legend-options {
            width: calc(1em + 0.3em + 0.3em);
        }

        /* sentences section */

        .entry-sentence-wrapper {
            background-color: white;
            border-radius: 0.3em;
            padding: 0.3em;
            gap: 0.3em;
        }
        .entry2-sentence-wrapper {
            background-color: white;
            border-radius: 0.3em;
            padding: 0.3em;
            gap: 0.25em;
        }

        .entry2-sentence-wrapper label {
            color: var(--text-subtitle);
            font-size: 0.8em;
            width: 3em;
            text-align: center;
        }
        
        .entry-sentence-wrapper > select {
            width: calc(1.25 * 10em);
            font-size: 0.8em;
        }
        .entry2-sentence-wrapper select {
            width: calc(1.25 * 10em);
            font-size: 0.8em;
        }
        .entry-sentence-L1, .entry-sentence-L2 {
            background-color: var(--bg-light);
            border: none;
            border-bottom: thin solid var(--border-medium);
            padding: 0.1em 0.5em;
            width: 16em;
        }
        .entry-sentence-L2 + .entry-sentence-L1 {
            margin-top: 0.25em;
        }

        .entry2-sentence-L1, .entry2-sentence-L2 {
            background-color: var(--bg-light);
            border: none;
            border-bottom: thin solid var(--border-medium);
            border-radius: 4px;
            padding: 0.1em 0.5em;
            /* margin: 0 2em; */
            /* margin-left: 4em; */
            /* width: 16em; */
            flex-grow: 1;
        }

        








        .icon-headword, .icon-delete {
            background-color: var(--primary-dark);
            border-radius: 0.25em;
            width: calc(1em + 0.3em + 0.3em);
            height: calc(1em + 0.3em + 0.3em);
        }
        .icon-audio {
            color: var(--primary-dark);
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M 6 15 h -2 a 1 1 0 0 1 -1 -1 v -4 a 1 1 0 0 1 1 -1 h 2 l 3.5 -4.5 a 0.8 0.8 0 0 1 1.5 0.5 v 14 a 0.8 0.8 0 0 1 -1.5 0.5 l -3.5 -4.5 Z M 15 8 a 5 5 0 0 1 0 8 L 14.1 14.8 a 3.5 3.5 0 0 0 0 -5.6 Z M 17.7 5 a 9 9 0 0 1 0 14 L 16.75 17.83 a 8 8 0 0 0 0 -11.67 Z" /></svg>');
            /* <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                <path d='M 6 15 h -2 a 1 1 0 0 1 -1 -1 v -4 a 1 1 0 0 1 1 -1 h 2 l 3.5 -4.5 a 0.8 0.8 0 0 1 1.5 0.5 v 14 a 0.8 0.8 0 0 1 -1.5 0.5 l -3.5 -4.5 Z M 15 8 a 5 5 0 0 1 0 8 L 14.1 14.8 a 3.5 3.5 0 0 0 0 -5.6 Z M 17.7 5 a 9 9 0 0 1 0 14 L 16.75 17.83 a 8 8 0 0 0 0 -11.67 Z' />
            </svg> */
            border-radius: 0.25em;
            width: calc(1em + 0.3em + 0.3em);
            height: calc(1em + 0.3em + 0.3em);
        }
        .icon-audio:hover {
            background-color: var(--bg-light);
        }
        .icon-plus {
            /* background-color: var(--primary-dark); */
            color: white;
            background-color: var(--primary);
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="white" stroke="none"><path d="M 12 18 m -1 0 a 1 1 0 1 0 2 0 v -5 h 5 a 1 1 0 1 0 0 -2 h -5 v -5 a 1 1 0 1 0 -2 0 v 5 h -5 a 1 1 0 1 0 0 2 h 5 z" /></svg>');
            
            /* can't use fill="currentColor" since svg is technically outside DOM */
            /* either manually set fill color, or use mask instead of background-image */

            /* border: thin solid var(--primary-dark); */
            border-radius: 0.25em;
            width: calc(1em + 0.3em + 0.3em);
            height: calc(1em + 0.3em + 0.3em);
        }
        .icon-plus:hover {
            background-color: var(--primary-selection);
        }
        .icon-tridot {
            color: var(--primary-dark);
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M 12 12 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0 M 12 19 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0 M 12 5 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0" /></svg>');
            /* <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                <path d='M 12 12 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0 M 12 19 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0 M 12 5 m -2 0 a 2 2 0 1 0 4 0 a 2 2 0 1 0 -4 0' />
            </svg> */
            
            border-radius: 0.25em;
            width: calc(1em + 0.3em + 0.3em);
            height: calc(1em + 0.3em + 0.3em);
        }
        .icon-tridot:hover {
            background-color: var(--bg-light);
        }



        /**** MEDIA QUERIES ****/

        /* mobile-first styling for better load times on less-powerful devices */
        @media (max-aspect-ratio: 5/4) { /* mobile mode */
            /*  */
        }
		@media (min-aspect-ratio: 5/4) { /* desktop mode */
            :root {
                /*  */
            }
            /* .flex-adapt {
                display: flex;
                flex-direction: row !important;
                align-items: normal;
                justify-content: center;
            }
            .flex-adapt-reverse {
                display: flex;
                flex-direction: column !important;
                align-items: center;
            } */
        }
		
	</style>
</head>
<body>

<!-- <div id='main-floating'>
    <h1>Language Data</h1>
    <div class='separator-line'></div>
    <div id='lang-data' class='flex-col'>
        <label for='lang-name'>Language Name</label>
        <input id='lang-name' type='text'>
        <label for='lang-abbr'>Abbreviation</label>
        <input id='lang-abbr' type='text'>
        <p id='desc-abbr' class='input-subtitle'>2-3 letter abbreviation of language name, for example "eng" for English.</p>
        <label for='lang-alphabet'>Alphabet</label>
        <input id='lang-alphabet' type='text' value='a b c d e f g h i j k l m n o p q r s t u v w x y z'>
        <p id='desc-alphabet' class='input-subtitle'>Every character in your language's alphabet, separated by spaces. The order will determine how words in your lexicon are alphabetized.</p>
    </div>
    <div class='separator-line'></div>
    <div class='flex-col'>
        <h2>Parts of Speech & Wordforms</h2>
        <div id='forms-wrapper' class='flex-col'>
            <div class='flex-col'>
                <p class='forms-catg'>Noun <span class='forms-formcount'>(4 wordforms)</span></p>
                <div class='flex-row forms-formnames-wrapper'>
                    <div class='forms-formname'>Subject</div>
                    <div class='forms-formname'>Object</div>
                    <div class='forms-formname'>Owner</div>
                    <div class='forms-formname'>Owned</div>
                    <div class='forms-formname forms-unattested'>Locative</div>
                </div>
            </div>
            <p class='no-forms'>[no parts of speech have been defined]</p>
        </div>
    </div>
    <div class='separator-line'></div>
    <div id='lang-stats' class='flex-col'>
        <p>Entries: 0</p>
        <p>L1 Words: 0</p>
        <p>L2 Words: 0</p>
        <p>Sentences: 0</p>
        <p>By part of speech:</p>
        <p> Nouns: 0</p>
        <p> Verbs: 0</p>
        <p> Adjectives: 0</p>
    </div>
</div> -->

<div id='main' class='flex-row'>
    <!-- left panel: lexicon -->
    <div id='panel-lexicon' class='flex-col'>
        <div id='lexicon-header' class='flex-col'>
            <div class='flex-row'>
                <h2>Sort lexicon by:</h2>
                <div class='flex-row toggle-switch'>
                    <button>L1</button>
                    <button class='toggle-selected'>L2</button>
                </div>
            </div>
            <!-- <p class='subtitle-small'>L1 is the finder language (usually English) used to organize the database. L2 is the target language which data is being collected for.</p> -->
        </div>
        <div id='lexicon-filters' class='flex-col'>
            <div id='lexicon-search-wrapper' class='flex-col'>
                <div id='lexicon-search-from' class='flex-row'>
                    <div id='lexicon-search-from-selector' class='selector-left'></div>
                    <button class='option-selected'>Begins</button>
                    <button>Contains</button>
                    <button>Ends</button>
                </div>
                <input type='text' placeholder='Search...'>
            </div>
            <div id='lexicon-filter-catg-wrapper' class='flex-col'>
                <p>Filter by part of speech:</p>
                <div id='catg-filter-wrapper' class='flex-row'>
                    <button class='toggle-enabler'>Noun</button>
                    <button class='toggle-enabler'>Verb</button>
                    <button class='toggle-enabler toggle-enabler-disabled'>Adjective</button>
                </div>
            </div>
        </div>
        <div id='lexicon-entries' class='flex-col'>
            <div>Entry 1</div>
            <div>Entry 2</div>
            <div>Entry 3</div>
            <div>Entry 4</div>
            <div>Entry 5</div>
        </div>
    </div>

    <!-- right panel: entry editor -->
    <div id='panel-entry-editor' class='flex-col'>

        <!-- HEADER (L1, CATG, IMAGES) -->

        <div id='entry-header' class='flex-row'>
            <label>English Word(s)</label>
            <input id='entry-L1' type='text'>
            <div class='flex-row flex-fill'>
                <p id='entry-catg'>Verb</p>
            </div>
            <button id='entry-image'>No Image</button>
        </div>

        <div id='entry-content' class='flex-col'>

            <!-- WORDFORMS -->

            <h3 class='section-title'>Wordforms <span class='subtitle-small'>(13)</span></h3>
            <div id='entry-forms-legend' class='flex-row'>
                <p id='entry2-legend-case'>Form/Case</p>
                <p id='entry2-legend-form'>Wikchamni Word</p>
                <div class='flex-sep'></div>
                <p>Audio</p>
                <div class='flex-sep'></div>
                <p id='entry2-legend-options'></p>
            </div>
            <div id='entry-forms-wrapper' class='flex-col'>
                
                <div class='flex-row entry2-form-wrapper'>
                    <select>
                        <option value='-1'>-- Select Form --</option>
                        <option value='0'>Subject</option>
                        <option value='0'>Object</option>
                        <option value='0'>Locative</option>
                        <option value='0'>Possessed</option>
                        <option value='long'>Long asf wordform name</option>
                    </select>
                    <input type='text'>
                    <div class='flex-sep'></div>
                    <div class='flex-row entry2-audio-gallery'>
                        <button class='icon-audio'></button>
                        <button class='icon-plus'></button>
                    </div>
                    <div class='flex-sep'></div>
                    <button class='icon-tridot'></button>
                </div>
                <div class='flex-row entry2-form-wrapper'>
                    <select>
                        <option value='-1'>-- Select Form --</option>
                        <option value='0'>Subject</option>
                        <option value='0'>Object</option>
                        <option value='0'>Locative</option>
                        <option value='0'>Possessed</option>
                        <option value='long'>Long asf wordform name</option>
                    </select>
                    <input type='text'>
                    <div class='flex-sep'></div>
                    <div class='flex-row entry2-audio-gallery'>
                        <p class='entry2-no-audio'>No Audio</p>
                        <button class='icon-plus'></button>
                    </div>
                    <div class='flex-sep'></div>
                    <button class='icon-tridot'></button>
                </div>
                <div class='flex-row entry2-form-wrapper'>
                    <select>
                        <option value='-1'>-- Select Form --</option>
                        <option value='0'>Subject</option>
                        <option value='0'>Object</option>
                        <option value='0'>Locative</option>
                        <option value='0'>Possessed</option>
                        <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                    </select>
                    <input type='text'>
                    <div class='flex-sep'></div>
                    <div class='flex-row entry2-audio-gallery'>
                        <button class='icon-audio'></button>
                        <button class='icon-audio'></button>
                        <button class='icon-plus'></button>
                    </div>
                    <div class='flex-sep'></div>
                    <button class='icon-tridot'></button>
                </div>

            </div>
            <button id='entry-add-wordform' onclick='stub_addForm()'>Add New Wordform</button>

            <!-- SENTENCES -->

            <h3 class='section-title'>Sentences <span class='subtitle-small'>(5)</span></h3>
            <div id='entry-forms-legend' class='flex-row'>
                <p id='entry2-legend-case'>Form/Case</p>
                <!-- <p id='entry2-legend-form'>Sentences</p> -->
                <div class='flex-sep'></div>
                <p>Audio</p>
                <div class='flex-sep'></div>
                <p id='entry2-legend-options'></p>
            </div>
            <div id='entry-forms-wrapper' class='flex-col'>

                <!-- <div class='flex-row entry-sentence-wrapper'>
                    <select>
                        <option value='-1'>-- Select Form --</option>
                        <option value='0'>Subject</option>
                        <option value='0'>Object</option>
                        <option value='0'>Locative</option>
                        <option value='0'>Possessed</option>
                        <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                    </select>
                    <div class='flex-col'>
                        <input class='entry-sentence-L2' type='text' placeholder='Wikchamni'>
                        <input class='entry-sentence-L1' type='text' placeholder='English'>
                    </div>
                    <div class='flex-row entry-audio-gallery'>
                        <button class='icon-audio'></button>
                        <button class='icon-audio'></button>
                        <button class='icon-plus'></button>
                    </div>
                    <button class='icon-tridot'></button>
                </div>
                <div class='flex-row entry-sentence-wrapper'>
                    <select>
                        <option value='-1'>-- Select Form --</option>
                        <option value='0'>Subject</option>
                        <option value='0'>Object</option>
                        <option value='0'>Locative</option>
                        <option value='0'>Possessed</option>
                        <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                    </select>
                    <div class='flex-col'>
                        <input class='entry-sentence-L2' type='text' placeholder='Wikchamni'>
                        <input class='entry-sentence-L1' type='text' placeholder='English'>
                    </div>
                    <div class='flex-row entry-audio-gallery'>
                        <button class='icon-audio'></button>
                        <button class='icon-audio'></button>
                        <button class='icon-plus'></button>
                    </div>
                    <button class='icon-tridot'></button>
                </div> -->

                <!-- <div class='flex-col entry2-sentence-wrapper'>
                    <div class='flex-row'>
                        <select>
                            <option value='-1'>-- Select Form --</option>
                            <option value='0'>Subject</option>
                            <option value='0'>Object</option>
                            <option value='0'>Locative</option>
                            <option value='0'>Possessed</option>
                            <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                        </select>
                        <div class='flex-row entry-audio-gallery'>
                            <p class='entry2-no-audio'>No Audio</p>
                            <button class='icon-plus'></button>
                        </div>
                        <button class='icon-tridot'></button>
                    </div>
                    <input class='entry2-sentence-L2' type='text' placeholder='Wikchamni'>
                    <input class='entry2-sentence-L1' type='text' placeholder='English'>
                </div>
                <div class='flex-col entry2-sentence-wrapper'>
                    <div class='flex-row'>
                        <select>
                            <option value='-1'>-- Select Form --</option>
                            <option value='0'>Subject</option>
                            <option value='0'>Object</option>
                            <option value='0'>Locative</option>
                            <option value='0'>Possessed</option>
                            <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                        </select>
                        <div class='flex-row entry-audio-gallery'>
                            <button class='icon-audio'></button>
                            <button class='icon-plus'></button>
                        </div>
                        <button class='icon-tridot'></button>
                    </div>
                    <input class='entry2-sentence-L2' type='text' placeholder='Wikchamni'>
                    <input class='entry2-sentence-L1' type='text' placeholder='English'>
                </div> -->

                <div class='flex-col entry2-sentence-wrapper'>
                    <div class='flex-row'>
                        <select>
                            <option value='-1'>-- Select Form --</option>
                            <option value='0'>Subject</option>
                            <option value='0'>Object</option>
                            <option value='0'>Locative</option>
                            <option value='0'>Possessed</option>
                            <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                        </select>
                        <div class='flex-row entry-audio-gallery'>
                            <button class='icon-audio'></button>
                            <button class='icon-plus'></button>
                        </div>
                        <button class='icon-tridot'></button>
                    </div>
                    <div class='flex-row'>
                        <label>Wik</label>
                        <input class='entry2-sentence-L2' type='text'>
                    </div>
                    <div class='flex-row'>
                        <label>Eng</label>
                        <input class='entry2-sentence-L1' type='text'>
                    </div>
                </div>
                <div class='flex-col entry2-sentence-wrapper'>
                    <div class='flex-row'>
                        <select>
                            <option value='-1'>-- Select Form --</option>
                            <option value='0'>Subject</option>
                            <option value='0'>Object</option>
                            <option value='0'>Locative</option>
                            <option value='0'>Possessed</option>
                            <option value='long'>Mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm</option>
                        </select>
                        <div class='flex-row entry-audio-gallery'>
                            <p class='entry2-no-audio'>No Audio</p>
                            <button class='icon-plus'></button>
                        </div>
                        <button class='icon-tridot'></button>
                    </div>
                    <div class='flex-row'>
                        <label>Wik</label>
                        <input class='entry2-sentence-L2' type='text'>
                    </div>
                    <div class='flex-row'>
                        <label>Eng</label>
                        <input class='entry2-sentence-L1' type='text'>
                    </div>
                </div>

            </div>

            <button id='entry-add-sentence' onclick='stub_addForm()'>Add New Sentence</button>






            <!-- <div class='separator-line'></div> -->

            <!-- Entry Notes -->

            <h3 class='section-title'>Notes <span class='subtitle-small'>(1)</span></h3>
            <div id='entry-notes-wrapper' class='flex-col'>
                <div class='flex-col entry-note'>
                    <p>Note #1</p>
                    <textarea rows='3'>Related language Chukchansi tʰixtʰinitʰ 'sick'</textarea>
                </div>
            </div>
            <button id='entry-add-note' onclick=''>Add New Note</button>
            
            <div class='separator-line'></div>

            <!-- The Danger Zone -->

            <div id='entry-danger-zone-wrapper' class='flex-col'>
                <button id='danger-zone-header' class='flex-col'>
                    <h3>The Danger Zone</h3>
                    <div class='arrow-down'></div>
                </button>
                <div id='entry-danger-zone' class='flex-col'>
                    <div id='entry-delete-wrapper' class='flex-row'>
                        <button id='entry-delete'>Delete Entry</button>
                        <p class='subtitle-warning-small'>This will delete the current entry PERMANENTLY. This action cannot be undone.</p>
                    </div>
                    <!-- <div class='flex-col'>
                        <h4>Raw Data Entry</h4>
                        <input type='text'>
                    </div> -->
                </div>
            </div>
        </div>
        
    </div>
</div>



<script type='text/javascript'>

    //// REFS ////

    // https://subscriptions.hollywoodreporter.com/site/thr-subscribe



    //// WAVE 3 ////

    // 8.0 hrs: design research, color palette, layout
    // 0.5 hrs: custom alphabetization research
    // 2.0 hrs: add Language object and JSON data format, misc bugfixes
    // 1.5 hrs: data format and editor design
    // 4.5 hrs: lexicon design
    // 24.0 hrs: entry editor design
    // 4.0 hrs: JSON data load/save



    //// dictionary.js ////

    const SYNONYM_SPLITTER = '; ';
	const ALPHABET_SPLITTER = ' ';

    function alphabetizeUnicode (a,b) {
		// alphabetization defaults to case-insensative unicode character order
		a = a.toLowerCase();
		b = b.toLowerCase();
		if (a > b) return 1;
		if (a < b) return -1;
		return 0;
	}

    class Language {
		constructor (name = 'New Language', abbreviation = 'lng', alphabet = '') {
			this.name = name;
			this.abbr = abbreviation;
			this.alphabet = alphabet.split(ALPHABET_SPLITTER);
			this.alphabetize = alphabetizeUnicode;
			this.usesForms = false;
			this.forms = {};
		}
        get abbreviation () { return this.abbr; }
		setCatgForms (catg, forms) {
			this.usesForms = true;
			for (let form of this.forms[catg]) {
				if (form) {
					console.warn(`Overwriting form names ${this.forms[catg]} -> ${forms}.`);
					break;
				}
			}
			this.forms[catg] = [];
			for (let form in forms) {
				this.forms[catg].push(form);
			}
		}
		addForm (catg, formNum, formName) {
			this.usesForms = true;
			if (!this.forms[catg]) {
				this.forms.catg = [];
			}
			if (this.forms[catg][formNum] && this.forms[catg][formNum] != formName) {
				console.warn(`Replacing ${catg} form ${formNum} "${this.forms[catg][formNum]}" with "${formName}" (${this.name}).`);
			}
			this.forms[catg][formNum] = formName;
		}
		getForm (catg, formNum) {
			if (this.forms[catg] && this.forms[catg][formNum]) {
				return this.forms[catg][formNum];
			} else {
				// return `Form ${formNum}`;
				return '';
			}
		}
		hasForm (catg, formNum) {
			return this.forms[catg] && this.forms[catg][formNum];
		}
        toJSON () {
            let o = {
                name : this.name ?? "",
                abbr : this.abbr ?? "",
                alphabet : this.alphabet.join(ALPHABET_SPLITTER),
                usesForms : this.usesForms,
                forms : {}
            };
            for (let catg in this.forms) {
                o.forms[catg] = [];
                for (let formNum = 0; formNum < this.forms[catg].length; formNum++) {
                    o.forms[catg][formNum] = this.forms[catg][formNum];
                }
            }
            return JSON.stringify(o);
        }
        fromJSON (s) {
            let o = JSON.parse(s);
            this.name = o.name ?? "";
            this.abbr = o.abbr ?? "";
            this.alphabet = (o.alphabet) ? o.alphabet.split(ALPHABET_SPLITTER) : [];
            this.usesForms = o.usesForms ?? (Object.keys(o.forms).length > 0);
            this.forms = {};
            for (let catg in o.forms) {
                this.forms[catg] = [];
                for (let formNum = 0; formNum < o.forms[catg].length; formNum++) {
                    this.forms[catg][formNum] = o.forms[catg][formNum];
                }
            }
        }
	}

    //// site functionality ////

    const RE_ESCAPE = /[&<>"']/g;
    const RE_MAP_ESCAPE = { "&" : "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }; // all contexts support &#39; but not all support &apos;, so ignore it
    function escapeHTML (s) {
        return String(s).replace(RE_ESCAPE, c => RE_MAP_ESCAPE[c]);
    }
    // function escapeHTML (s) {
    //     return String(s)
    //         .replace(/&/g, '&amp;')
    //         .replace(/'/g, '&#39;')
    //         .replace(/"/g, '&quot;')
    //         // .replace(/`/g, '&#96;')
    //         .replace(/</g, '&lt;')
    //         .replace(/>/g, '&gt;');
    // }

    // LOAD //
    function stub_loadL1 (entry) {
        document.getElementById('entry-L1').value = escapeHTML(entry.L1);
    }
    function stub_loadCatg (entry) {
        document.getElementById('entry-catg').value = escapeHTML(entry.catg);
    }
    function stub_loadForms (entry) {
        // check if there's actually data to load
        if (entry.L2.length === 0) return;
        // reset parent container
        const parent = document.getElementById('entry-forms-wrapper');
        parent.innerHTML = '';
        // dynamically construct datafield element for each wordform
        // need to escape catgs and wordforms
        for (let i = 0; i < entry.L2.length; i++) {
            const vStr = `value='${escapeHTML(entry.L2[i].formId)}'`; // implicit type cast Number->String by escapeHTML()
            let eStr = wordformSelectors[entry.catg].replace(vStr, `${vStr} selected`)
                    + `<input type='text' value='${escapeHTML(entry.L2[i].content)}'>`;
            let e = document.createElement('div');
                e.id = `entry-form-${i}`;
                e.classList.add('flex-row');
                e.classList.add('entry-data-L2');
                e.innerHTML = eStr;
            console.log(eStr);
            parent.appendChild(e);
        }
    }
    function stub_addForm () {
        // add to data structure
        stub_activeEntry.L2.push({ formId : -1, content : `` });
        // add to UI
        let eStr = wordformSelectors[stub_activeEntry.catg] + `<input type='text'>`;
        let e = document.createElement('div');
            e.id = `entry-form-${stub_activeEntry.L2.length}`;
            e.classList.add('flex-row');
            e.classList.add('entry-data-L2');
            e.innerHTML = eStr;
        document.getElementById('entry-forms-wrapper').appendChild(e);
    }

    // UPDATE //

    function stub_updateL1 () {
        let synonyms = document.getElementById('entry-L1').value.split(/;\s*/).join('; ');
        stub_activeEntry.L1 = synonyms;
        if (document.getElementById('entry-L1').value !== synonyms) {
            // TODO: using setRangeText() or input.value=v destroy undo buffer; execCommand() preserves it, but is deprecated and not supported in all browsers
            document.getElementById('entry-L1').value = synonyms;
            // document.getElementById('entry-L1').setRangeText(synonyms, 0,document.getElementById('entry-L1').value.length, 'end');
        }
        console.log(synonyms);
    }
    document.getElementById('entry-L1').addEventListener('blur', stub_updateL1);

    function loadLanguageData (L) {
        document.getElementById('lang-name').value = L.name;
        document.getElementById('lang-abbr').value = L.abbr;
        document.getElementById('lang-alphabet').value = L.alphabet.join(ALPHABET_SPLITTER);
    }



    //// data ////

    const CATG_NAMES = {
        'n' : 'Noun',
        'v' : 'Verb',
        'adj' : 'Adjective'
    };
    let stub_wordforms = {
        'n' : ['Subject','Object','Locative','Supercalifragalisticexpialadocious'],
        // 'v' : ['Past','Recent Past','Future','Fantastic','Supercalifragalisticexpialadocious']
        'v' : ['Past','Medio Passive','Durative Aorist','Future','Passive Gerundial','Durative Present','Neutral Verbal Noun','Causative','Neutral Agentive','UNDERLYING']
    };
    let wordformSelectors = (() => {
        // <select> elements for wordforms are highly reused, so cache constructor strings for them
        // need to escape wordform names
        let o = {};
        for (let catg in stub_wordforms) {
            let eStr = `<select>`;
                eStr += `<option value='-1'>-- Choose One --</option>`;
                for (let formNum = 0; formNum < stub_wordforms[catg].length; formNum++) {
                    eStr += `<option value='${formNum}'>${escapeHTML(stub_wordforms[catg][formNum])}</option>`;
                }
                eStr += `<option value='+'>++ ADD NEW FORM ++</option>`;
            eStr += `</select>`;
            o[catg] = eStr;
        }
        return o;
    })();

    // let stub_activeEntry = {
    //     L1 : `dash; run; sprint`,
    //     catg : `v`,
    //     L2 : [
    //         { formId : 0, content : `drundl` },
    //         { formId : 1, content : `drundel` },
    //         { formId : 2, content : `drund'rel` },
    //         { formId : -1, content : `drundel\`lin&#96;` }
    //     ],
    //     notes : [
    //         //
    //     ]
    // };
    let stub_activeEntry = {
        L1 : `get sick; get ill`,
        catg : `v`,
        L2 : [
            { formId : 1, content : `čʰɨxčʰin/` },
            { formId : 2, content : `čʰə·xačʰnaš` },
            { formId : 3, content : `čʰɨxčʰin` },
            { formId : 4, content : `cʰɨxčʰɨnšɨ` },
            { formId : 5, content : `čʰə·xɨčʰin` },
            { formId : 6, content : `čʰɨxčʰin/` },
            { formId : 7, content : `čʰɨxa·čʰanʼši` },
            { formId : 7, content : `čʰɨxa·čʰin` },
            { formId : 7, content : `čʰɨxa·čʰantit` },
            { formId : 7, content : `čʰɨxa·čʰanti` },
            { formId : 7, content : `čʰɨxa·čʰantʰa` },
            { formId : 8, content : `čʰɨxačʰničʼa` },
            { formId : 9, content : `#čʰɨxičʰ -in` },
        ],
        notes : [
            { type : '-1', content : `Related language Chukchansi tʰixtʰinitʰ 'sick'` }
        ]
    };

    // L1 English
    let L1_eng = new Language('English', 'eng', `a b c d e f g h i j k l m n o p q r s t u v w x y z`);
    let L1str = L1_eng.toJSON();
    console.log(L1str);
    // L2 Wikchamni
    let L2_wik = new Language('Wikchamni', 'wik', `a c č e f h i k l m n ŋ o p s š t ṭ u w x y ʔ`);
        L2_wik.usesForms = true;
    // L2_wik.fromJSON(`{"name":"Wikchamni","abbr":"wik","alphabet":"a c č e f h i k l m n ŋ o p s š t ṭ u w x y ʔ","usesForms":true,"forms":{}}`);
    let L2str = L2_wik.toJSON();
    console.log(L2str);

    // loadLanguageData(L2_wik);

    stub_loadL1(stub_activeEntry);
    stub_loadCatg(stub_activeEntry);
    // stub_loadForms(stub_activeEntry);
    // stub_addForm();
    // stub_addForm();
    // stub_addForm();



    // // demo animated selection indicator
    // document.getElementById('lexicon-search-from-selector').classList.remove('selector-left');

    // TODO: gubbins toggles for users
        // confirmation check for deleting form/note/etc
        // confirmation check for deleting entry
        // auto-clean synonym strings ("run;   dash" -> "run; dash")

</script>

</body>
</html>